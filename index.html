
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparative & Modifiers Challenge</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #6c5ce7; --success: #55efc4; --error: #ff7675; --warning: #ffeaa7; }
        body { 
            font-family: 'Poppins', sans-serif; margin: 0; height: 100vh; display: flex; justify-content: center; align-items: center;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center; color: white; overflow: hidden;
        }
        .quiz-container { 
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px; box-shadow: 0 25px 50px rgba(0,0,0,0.8);
            width: 95%; max-width: 750px; text-align: center; border: 1px solid rgba(255,255,255,0.1);
            max-height: 90vh; overflow-y: auto;
        }
        #timer { font-size: 1.8rem; font-weight: 600; color: var(--warning); margin-bottom: 5px; }
        .progress-container { display: flex; height: 8px; width: 100%; background: rgba(255,255,255,0.1); border-radius: 20px; margin: 20px 0; overflow: hidden; }
        .progress-segment { flex: 1; transition: background 0.4s ease; border-right: 1px solid rgba(0,0,0,0.3); }
        .active-sentence { font-size: 1.1rem; color: #ddd; margin-bottom: 15px; font-style: italic; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; }
        .target-sentence { font-size: 1.25rem; line-height: 1.6; margin-bottom: 25px; }
        .input-box { border-bottom: 2px dashed var(--primary); min-width: 200px; display: inline-block; }
        input[type="text"] {
            background: transparent; border: none; color: var(--success);
            font-size: 1.3rem; font-weight: 600; text-align: center; outline: none;
            width: 350px; font-family: 'Poppins', sans-serif; padding: 5px;
        }
        #feedback { margin-top: 15px; min-height: 40px; font-weight: 600; }
        #next-btn { 
            margin-top: 10px; padding: 12px 40px; background: linear-gradient(45deg, #6c5ce7 0%, #a29bfe 100%);
            color: white; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .review-item { text-align: left; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 15px; margin-bottom: 10px; border-left: 5px solid var(--error); font-size: 0.9rem; }
        .hidden { display: none; }
        .question-counter { font-size: 1rem; color: #ddd; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="quiz-container">
    <div id="start-screen">
        <h2>Comparative Transformation Quiz</h2>
        <p>Rewrite the sentence using the word in brackets.</p>
        <p style="color: var(--warning); font-size: 0.9rem;">üìù 10 random questions | ‚è±Ô∏è 5 minutes</p>
        <input type="text" id="student-name" placeholder="Full Name" style="background: rgba(255,255,255,0.1); border: 2px solid var(--primary); border-radius: 15px; color: white; padding: 12px; text-align: center; margin-bottom: 20px; width: 80%;">
        <br>
        <button id="next-btn" onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="main-quiz" class="hidden">
        <div id="timer">05:00</div>
        <div class="question-counter" id="question-counter"></div>
        <div class="progress-container" id="progress-bar"></div>
        <div id="quiz-content">
            <p class="active-sentence" id="original-text"></p>
            <div class="target-sentence" id="input-display"></div>
            <div id="feedback"></div>
            <button id="next-btn" onclick="handleButtonClick()">Check Answer</button>
        </div>
    </div>
</div>

<audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3"></audio>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzjaoBxGbsuMNHNvenbb_3wAw1XKuGLHSFoSHbvT3NL0zAkFbWSppPQVyYLxjTxCJFp/exec"; 

    const questionBank = [
        // just as...as (equality)
        { original: "Talents and skills are equally important.", pre: "Talents", post: "skills. (just)", ans: "are just as important as" },
        { original: "Las Vegas and San Francisco are both very expensive.", pre: "Las Vegas", post: "San Francisco. (just)", ans: "is just as expensive as" },
        { original: "The red car and the blue car are the same price.", pre: "The red car", post: "the blue car. (just)", ans: "is just as expensive as" },
        { original: "My brother and I have the same height.", pre: "I", post: "my brother. (just)", ans: "am just as tall as" },
        { original: "Coffee and tea are equally popular in this country.", pre: "Coffee", post: "tea in this country. (just)", ans: "is just as popular as" },
        { original: "Summer and winter are equally beautiful here.", pre: "Summer", post: "winter here. (just)", ans: "is just as beautiful as" },
        { original: "Math and physics are equally challenging.", pre: "Math", post: "physics. (just)", ans: "is just as challenging as" },
        { original: "Dogs and cats make equally good pets.", pre: "Dogs", post: "cats. (just)", ans: "make just as good pets as" },
        { original: "Reading and writing are equally important skills.", pre: "Reading", post: "writing. (just)", ans: "is just as important as" },
        { original: "Tokyo and London are both very crowded.", pre: "Tokyo", post: "London. (just)", ans: "is just as crowded as" },
        
        // not as...as (inequality)
        { original: "Some animals are less dangerous than others.", pre: "Some animals", post: "others. (as)", ans: "are not as dangerous as" },
        { original: "A bike is less fast than a motorcycle.", pre: "A bike", post: "a motorcycle. (as)", ans: "is not as fast as" },
        { original: "Today is less hot than yesterday.", pre: "Today", post: "yesterday. (as)", ans: "is not as hot as" },
        { original: "Vegetables are less tasty than chocolate.", pre: "Vegetables", post: "chocolate. (as)", ans: "are not as tasty as" },
        { original: "I thought the book was less interesting than the movie.", pre: "The book", post: "the movie. (as)", ans: "was not as interesting as" },
        { original: "The sequel is less exciting than the original film.", pre: "The sequel", post: "the original film. (as)", ans: "is not as exciting as" },
        { original: "Silver is less valuable than gold.", pre: "Silver", post: "gold. (as)", ans: "is not as valuable as" },
        { original: "My phone is less modern than yours.", pre: "My phone", post: "yours. (as)", ans: "is not as modern as" },
        { original: "The copy is less clear than the original.", pre: "The copy", post: "the original. (as)", ans: "is not as clear as" },
        { original: "Artificial flowers are less beautiful than real ones.", pre: "Artificial flowers", post: "real ones. (as)", ans: "are not as beautiful as" },
        
        // less...than
        { original: "I think Los Angeles is more beautiful than New York.", pre: "I think New York is", post: "Los Angeles. (less)", ans: "less beautiful than" },
        { original: "In my opinion, Samarkand is more exciting than Tashkent.", pre: "In my opinion, Tashkent is", post: "Samarkand. (less)", ans: "less exciting than" },
        { original: "The city center is more crowded than the suburbs.", pre: "The suburbs are", post: "the city center. (less)", ans: "less crowded than" },
        { original: "Modern houses are more efficient than old ones.", pre: "Old houses are", post: "modern ones. (less)", ans: "less efficient than" },
        { original: "The market is more colorful than the supermarket.", pre: "The supermarket is", post: "the market. (less)", ans: "less colorful than" },
        { original: "Science is more difficult than art.", pre: "Art is", post: "science. (less)", ans: "less difficult than" },
        { original: "The plane is more modern than the train.", pre: "The train is", post: "the plane. (less)", ans: "less modern than" },
        { original: "Fruit is healthier than candy.", pre: "Candy is", post: "fruit. (less)", ans: "less healthy than" },
        { original: "The sun is brighter than a lightbulb.", pre: "A lightbulb is", post: "the sun. (less)", ans: "less bright than" },
        { original: "The teacher is more patient than the child.", pre: "The child is", post: "the teacher. (less)", ans: "less patient than" },
        
        // more...than
        { original: "I am less competent than my classmate.", pre: "My classmate", post: "me. (more)", ans: "is more competent than" },
        { original: "Winter is less warm than summer.", pre: "Summer", post: "winter. (more)", ans: "is more warm than" },
        { original: "The countryside is less polluted than the city.", pre: "The city", post: "the countryside. (more)", ans: "is more polluted than" },
        { original: "My old laptop is less powerful than my new one.", pre: "My new laptop", post: "my old one. (more)", ans: "is more powerful than" },
        { original: "Classical music is less popular than pop music.", pre: "Pop music", post: "classical music. (more)", ans: "is more popular than" },
        { original: "Walking is less tiring than running.", pre: "Running", post: "walking. (more)", ans: "is more tiring than" },
        { original: "Tea is less caffeinated than coffee.", pre: "Coffee", post: "tea. (more)", ans: "is more caffeinated than" },
        { original: "The first version was less successful than the second.", pre: "The second version", post: "the first. (more)", ans: "was more successful than" },
        { original: "Small towns are less stressful than big cities.", pre: "Big cities", post: "small towns. (more)", ans: "are more stressful than" },
        { original: "Plastic is less durable than metal.", pre: "Metal", post: "plastic. (more)", ans: "is more durable than" },
        
        // far/much + comparative
        { original: "My new house is far better than the old one.", pre: "My new house", post: "than the old one. (a lot)", ans: "is a lot better" },
        { original: "The train is much faster than the bus.", pre: "The train", post: "than the bus. (far)", ans: "is far faster" },
        { original: "London is far more crowded than Tashkent.", pre: "Tashkent", post: "than London. (much)", ans: "is much less crowded" },
        { original: "Gold is much heavier than silver.", pre: "Gold", post: "than silver. (far)", ans: "is far heavier" },
        { original: "The exam was a lot easier than I expected.", pre: "The exam", post: "than I expected. (much)", ans: "was much easier" },
        { original: "This sofa is much more comfortable than that chair.", pre: "That chair", post: "this sofa. (far)", ans: "is far less comfortable than" },
        { original: "Public transport is much cheaper than driving.", pre: "Driving", post: "public transport. (far)", ans: "is far more expensive than" },
        { original: "The new restaurant is far better than the old one.", pre: "The new restaurant", post: "than the old one. (much)", ans: "is much better" },
        { original: "This movie is much more entertaining than the last one.", pre: "This movie", post: "than the last one. (far)", ans: "is far more entertaining" },
        { original: "Summer is far hotter than spring.", pre: "Summer", post: "than spring. (much)", ans: "is much hotter" },
        { original: "The ocean is much deeper than the lake.", pre: "The ocean", post: "than the lake. (far)", ans: "is far deeper" },
        { original: "My new job is far more challenging than my old one.", pre: "My new job", post: "than my old one. (much)", ans: "is much more challenging" },
        { original: "This computer is much faster than that one.", pre: "This computer", post: "than that one. (far)", ans: "is far faster" },
        { original: "The mountain is far higher than the hill.", pre: "The mountain", post: "than the hill. (much)", ans: "is much higher" },
        { original: "This book is much more interesting than the previous one.", pre: "This book", post: "than the previous one. (far)", ans: "is far more interesting" },
        
        // a bit/slightly + comparative
        { original: "This laptop is slightly more expensive than that one.", pre: "That laptop", post: "than this one. (a bit)", ans: "is a bit cheaper" },
        { original: "He is slightly taller than his brother.", pre: "He", post: "than his brother. (a bit)", ans: "is a bit taller" },
        { original: "The village is slightly more peaceful than the town.", pre: "The village", post: "the town. (a bit)", ans: "is a bit more peaceful" },
        { original: "Today is slightly warmer than yesterday.", pre: "Today", post: "than yesterday. (a bit)", ans: "is a bit warmer" },
        { original: "This coffee is slightly stronger than usual.", pre: "This coffee", post: "than usual. (a bit)", ans: "is a bit stronger" },
        { original: "My sister is slightly younger than me.", pre: "My sister", post: "than me. (a bit)", ans: "is a bit younger" },
        { original: "The blue shirt is slightly bigger than the red one.", pre: "The blue shirt", post: "than the red one. (a bit)", ans: "is a bit bigger" },
        { original: "This exercise is slightly harder than the last one.", pre: "This exercise", post: "than the last one. (a bit)", ans: "is a bit harder" },
        { original: "The new version is slightly better than the old one.", pre: "The new version", post: "than the old one. (a bit)", ans: "is a bit better" },
        { original: "This room is slightly darker than that one.", pre: "This room", post: "than that one. (a bit)", ans: "is a bit darker" },
        
        // Mixed comparative structures
        { original: "The homework is much more difficult than the classwork.", pre: "The classwork", post: "than the homework. (far)", ans: "is far less difficult" },
        { original: "Electric cars are becoming far more popular than gas cars.", pre: "Electric cars", post: "than gas cars. (much)", ans: "are much more popular" },
        { original: "This year's harvest is slightly better than last year's.", pre: "This year's harvest", post: "than last year's. (a bit)", ans: "is a bit better" },
        { original: "Online shopping is much more convenient than traditional shopping.", pre: "Online shopping", post: "than traditional shopping. (far)", ans: "is far more convenient" },
        { original: "My apartment is slightly smaller than yours.", pre: "My apartment", post: "than yours. (a bit)", ans: "is a bit smaller" },
        { original: "The new bridge is far longer than the old one.", pre: "The new bridge", post: "than the old one. (much)", ans: "is much longer" },
        { original: "Her pronunciation is much clearer than mine.", pre: "Her pronunciation", post: "than mine. (far)", ans: "is far clearer" },
        { original: "This problem is slightly more complex than we thought.", pre: "This problem", post: "than we thought. (a bit)", ans: "is a bit more complex" },
        { original: "Smartphones are far more advanced than old phones.", pre: "Smartphones", post: "than old phones. (much)", ans: "are much more advanced" },
        { original: "The service here is much friendlier than at the other place.", pre: "The service here", post: "than at the other place. (far)", ans: "is far friendlier" },
        
        // Additional variety
        { original: "Digital cameras are more practical than film cameras.", pre: "Film cameras", post: "than digital cameras. (less)", ans: "are less practical" },
        { original: "The economy is slightly stronger than last quarter.", pre: "The economy", post: "than last quarter. (a bit)", ans: "is a bit stronger" },
        { original: "Her essay is much longer than his.", pre: "Her essay", post: "than his. (far)", ans: "is far longer" },
        { original: "The climate is more humid here than in the desert.", pre: "The climate in the desert", post: "than here. (less)", ans: "is less humid" },
        { original: "My commute is slightly shorter than yours.", pre: "My commute", post: "than yours. (a bit)", ans: "is a bit shorter" },
        { original: "This brand is far more expensive than that one.", pre: "This brand", post: "than that one. (much)", ans: "is much more expensive" },
        { original: "The new policy is more flexible than the previous one.", pre: "The previous policy", post: "than the new one. (less)", ans: "was less flexible" },
        { original: "Winter nights are much longer than summer nights.", pre: "Winter nights", post: "than summer nights. (far)", ans: "are far longer" },
        { original: "His handwriting is slightly neater than mine.", pre: "His handwriting", post: "than mine. (a bit)", ans: "is a bit neater" },
        { original: "The stadium is far bigger than I imagined.", pre: "The stadium", post: "than I imagined. (much)", ans: "is much bigger" },
        { original: "This route is more direct than the other one.", pre: "The other route", post: "than this one. (less)", ans: "is less direct" },
        { original: "Her answer is slightly more accurate than his.", pre: "Her answer", post: "than his. (a bit)", ans: "is a bit more accurate" },
        { original: "The river is much wider here than upstream.", pre: "The river", post: "than upstream. (far)", ans: "is far wider here" },
        { original: "This fabric is more durable than that material.", pre: "That material", post: "than this fabric. (less)", ans: "is less durable" },
        { original: "My schedule is slightly busier this week than last week.", pre: "My schedule", post: "than last week. (a bit)", ans: "is a bit busier this week" },
        { original: "The atmosphere is much livelier at night than during the day.", pre: "The atmosphere", post: "than during the day. (far)", ans: "is far livelier at night" },
        { original: "His approach is more creative than the traditional method.", pre: "The traditional method", post: "than his approach. (less)", ans: "is less creative" },
        { original: "The second attempt was slightly more successful than the first.", pre: "The second attempt", post: "than the first. (a bit)", ans: "was a bit more successful" },
        { original: "This district is far safer than that neighborhood.", pre: "This district", post: "than that neighborhood. (much)", ans: "is much safer" },
        { original: "Her voice is more powerful than mine.", pre: "My voice", post: "than hers. (less)", ans: "is less powerful" }
    ];

    let currentQ = 0, timeLeft = 300, score = 0, timerId, isChecked = false, quizData = [], studentName = "", mistakes = [];

    function startQuiz() {
        studentName = document.getElementById('student-name').value.trim();
        if (!studentName) { alert("Please enter your name."); return; }
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('main-quiz').classList.remove('hidden');
        initQuiz();
    }

    function initQuiz() {
        // Shuffle and select 10 random questions
        quizData = questionBank.sort(() => 0.5 - Math.random()).slice(0, 10);
        initProgressBar();
        startTimer();
        loadQuestion();
    }

    function initProgressBar() {
        const bar = document.getElementById('progress-bar');
        bar.innerHTML = '';
        for(let i=0; i<10; i++) {
            const seg = document.createElement('div');
            seg.className = 'progress-segment';
            seg.id = `seg-${i}`;
            bar.appendChild(seg);
        }
    }

    function startTimer() {
        timerId = setInterval(() => {
            if (timeLeft <= 0) { clearInterval(timerId); finish(); return; }
            timeLeft--;
            let mins = Math.floor(timeLeft / 60), secs = timeLeft % 60;
            document.getElementById('timer').innerText = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }, 1000);
    }

    function loadQuestion() {
        const q = quizData[currentQ];
        document.getElementById('question-counter').innerText = `Question ${currentQ + 1} of 10`;
        document.getElementById('original-text').innerText = q.original;
        document.getElementById('input-display').innerHTML = `${q.pre} <span class="input-box"><input type="text" id="ans-input" placeholder="..." autocomplete="off"></span> ${q.post}`;
        document.getElementById('ans-input').focus();
        document.getElementById('feedback').innerText = '';
        document.getElementById('quiz-content').querySelector('button').innerText = 'Check Answer';
        isChecked = false;
        document.getElementById('ans-input').onkeypress = (e) => { if(e.key==='Enter') handleButtonClick(); };
    }

    function handleButtonClick() {
        if (!isChecked) {
            const userVal = document.getElementById('ans-input').value.trim().toLowerCase().replace(/\s+/g, ' ');
            const correctVal = quizData[currentQ].ans.toLowerCase();
            const segment = document.getElementById(`seg-${currentQ}`);
            
            if (userVal === correctVal) {
                document.getElementById('feedback').innerHTML = "<span style='color:var(--success)'>‚úì Correct!</span>";
                segment.style.background = 'var(--success)';
                document.getElementById('sound-correct').play();
                score++;
            } else {
                document.getElementById('feedback').innerHTML = `<span style='color:var(--error)'>‚úï Correct answer: ${quizData[currentQ].ans}</span>`;
                segment.style.background = 'var(--error)';
                document.getElementById('sound-wrong').play();
                mistakes.push(`Q: ${quizData[currentQ].original} | Your answer: ${userVal || "(blank)"} | Correct: ${quizData[currentQ].ans}`);
            }
            document.getElementById('quiz-content').querySelector('button').innerText = 'Continue';
            document.getElementById('ans-input').disabled = true;
            isChecked = true;
        } else {
            currentQ++;
            if (currentQ < 10) {
                document.getElementById('ans-input').disabled = false;
                loadQuestion();
            } else {
                finish();
            }
        }
    }

    function finish() {
        clearInterval(timerId);
        const percent = Math.round(score/10*100);
        
        const payload = {
            name: studentName,
            score: score + " / 10",
            percentage: percent + "%",
            mistakes: mistakes.join(" // ")
        };

        fetch(SCRIPT_URL, { method: "POST", mode: "no-cors", body: JSON.stringify(payload) });

        document.getElementById('quiz-content').innerHTML = `
            <h2 style="color:var(--primary)">Quiz Complete! üéâ</h2>
            <div style="font-size:3.5rem; color:var(--warning)">${percent}%</div>
            <p style="font-size:1.2rem;">${studentName}, you scored ${score} out of 10.</p>
            <p style="color:#ddd; font-size:0.9rem;">Your results have been sent to the teacher.</p>
            <button onclick="location.reload()" id="next-btn" style="margin-top:20px;">Try Again</button>
        `;
    }
</script>
</body>
</html>
